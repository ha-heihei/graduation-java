<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lh.mapper.ViewMarkMapper">

    <!-- 通用查询映射结果 -->
    <resultMap id="BaseResultMap" type="com.lh.entity.ViewMark">
        <id column="view_id" property="viewId" />
        <result column="view_name" property="viewName" />
        <result column="view_remarks" property="viewRemarks" />
        <result column="lat" property="lat" />
        <result column="lng" property="lng" />
        <result column="province" property="province" />
        <result column="city" property="city" />
        <result column="district" property="district" />
        <result column="view_img_url" property="viewImgUrl" />
        <result column="user_id" property="userId" />
        <result column="create_time" property="createTime" />
        <result column="scan_num" property="scanNum" />
    </resultMap>

    <!-- 通用查询结果列 -->
    <sql id="Base_Column_List">
        view_id, view_name, view_remarks, lat, lng, province, city, district, view_img_url, user_id, create_time, scan_num
    </sql>
    <select id="queryViewMarkByArea" resultType="com.lh.entity.ViewMark">
        select v.*,u.user_name,u.user_img_url,DATEDIFF(now(),v.create_time) fateDays from
            view_mark v join user u on u.user_id=v.user_id
            ${ew.customSqlSegment}
            order by v.create_time desc
    </select>

</mapper>
